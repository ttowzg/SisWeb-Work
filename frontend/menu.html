<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Menu Principal - Sistema Médico</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="main-container">
      <div class="menu-header">
        <h2 id="username-display">Olá, </h2>
      </div>

      <p class="options-label">Opções:</p>

      <div class="menu-options">
        <button
          class="menu-btn"
          onclick="location.href='paciente-cadastro.html'"
        >
          Cadastrar paciente novo
        </button>

        <button class="menu-btn" onclick="location.href='historico.html'">
          Histórico de Pacientes
        </button>
      </div>

      <div class="logout-section">
        <button class="btn-logout" onclick="location.href='login.html'">
          Sair
        </button>
      </div>
    </div>
    <script type="module">
      import { auth, onAuthStateChanged } from './db.js';

      document.addEventListener("DOMContentLoaded", function() {
        const usernameDisplay = document.getElementById("username-display");

        onAuthStateChanged(auth, (user) => {
          if (user) {
            // User is signed in, see docs for a list of available properties
            // https://firebase.google.com/docs/reference/js/auth.user
            const displayName = user.displayName;
            if (displayName) {
              usernameDisplay.textContent = `Olá, ${displayName}`;
            } else {
              usernameDisplay.textContent = `Olá, Usuário`; // Fallback if display name is not set
            }
          } else {
            // User is signed out
            usernameDisplay.textContent = `Olá, Visitante`; // Or redirect to login
            // window.location.href = "login.html"; // Uncomment to redirect if not logged in
          }
        });
      });
    </script>
  </body>
</html>