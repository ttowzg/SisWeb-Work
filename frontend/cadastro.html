<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cadastro - Sistema Médico</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="login-container">
      <h1>Cadastro</h1>
      <form action="#" method="POST">
        <div class="form-group">
          <label for="nome">Nome</label>
          <input
            type="text"
            id="nome"
            name="nome"
            placeholder="Digite seu nome"
            required
          />
        </div>
        <div class="form-group">
          <label for="email">E-mail</label>
          <input
            type="email"
            id="email"
            name="email"
            placeholder="contato@email.com"
            required
          />
        </div>
        <div class="form-group">
          <label for="senha">Senha</label>
          <input
            type="password"
            id="senha"
            name="senha"
            placeholder="Crie uma senha"
            required
          />
        </div>
        <div class="form-group">
          <label for="confirma-senha">Confirme sua senha</label>
          <input
            type="password"
            id="confirma-senha"
            name="confirma-senha"
            placeholder="Digite novamente"
            required
          />
        </div>
        <button type="submit" class="btn-submit">Cadastre-se</button>
      </form>

      <div class="signup-section">
        <span>Já possui uma conta?</span>
        <button
          type="button"
          class="btn-signup"
          onclick="location.href='login.html'"
        >
          Faça o login
        </button>
      </div>
    </div>
    <script type="module">
      import { auth, createUserWithEmailAndPassword, updateProfile } from './db.js';

      document.querySelector("form").addEventListener("submit", async function(event) {
        event.preventDefault();
        const email = document.getElementById("email").value;
        const password = document.getElementById("senha").value;
        const confirmPassword = document.getElementById("confirma-senha").value;
        const nome = document.getElementById("nome").value;

        if (password !== confirmPassword) {
          alert("Passwords do not match");
          return;
        }

        try {
          const userCredential = await createUserWithEmailAndPassword(auth, email, password);
          const user = userCredential.user;
          await updateProfile(user, { displayName: nome });
          window.location.href = "login.html";
        } catch (error) {
          console.error("Error during signup:", error);
          alert("Error creating user");
        }
      });
    </script>
  </body>
</html>
